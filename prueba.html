<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Libro</title>
</head>
<body>
    <h2>Formulario de Libro</h2>

    <form method="post">
        <label for="code">Código:</label>
        <input type="text" name="code" required><br>

        <label for="name">Nombre:</label>
        <input type="text" name="name" required><br>

        <label for="editorial">Editorial:</label>
        <input type="text" name="editorial" required><br>

        <label for="author">Autor:</label>
        <input type="text" name="author" required><br>

        <label for="year">Año:</label>
        <input type="number" name="year" required><br>

        <label for="category">Categoría:</label>
        <input type="text" name="category" required><br>

        <label for="image">Imagen:</label>
        <input type="file" name="image" accept="image/*" required><br>

        <label for="stock">Stock:</label>
        <input type="number" name="stock" required><br>

        <label for="description">Descripción:</label>
        <textarea name="description" rows="4" required></textarea><br>

        <label for="price">Precio:</label>
        <input type="number" name="price" required><br>

        <label for="sell_price">Precio de venta:</label>
        <input type="number" name="sell_price" required><br>

        <label for="id_provider">ID del proveedor:</label>
        <input type="number" name="id_provider" required><br>

        <label for="rating">Rating:</label>
        <input type="number" name="rating" step="0.1" required><br>

        <input type="submit" value="Enviar">
    </form>
    <script>
        document.getElementById('libroForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Obtener los datos del formulario
            const formData = new FormData(event.target);

            // Crear la solicitud XMLHttpRequest
            const xhr = new XMLHttpRequest();

            // Configurar la solicitud
            xhr.open('POST', 'http://127.0.0.1:8000/api/Productos', true);

            // Configurar el manejo de la carga
            xhr.onload = function() {
                if (xhr.status >= 200 && xhr.status < 300) {
                    // La solicitud fue exitosa
                    console.log('Respuesta del servidor:', xhr.responseText);
                } else {
                    // La solicitud falló
                    console.error('Error al enviar la solicitud. Código de estado:', xhr.status);
                }
            };

            // Configurar el manejo de errores de red
            xhr.onerror = function() {
                console.error('Error de red al enviar la solicitud.');
            };

            // Enviar la solicitud con los datos del formulario
            xhr.send(formData);
        });
    </script>
</body>
</html>